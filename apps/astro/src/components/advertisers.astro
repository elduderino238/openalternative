---
import type { HTMLAttributes } from "astro/types"
import { Image } from "astro:assets"
import { getCollection } from "astro:content"
import ExternalLink from "~/components/external-link.astro"
import { config } from "~/config"
import { stackVariants } from "~/styles/stack"
import { cx } from "~/utils/cva"
import Stack from "./ui/stack.astro"

type Props = HTMLAttributes<"div">

const { class: className, ...props } = Astro.props

const advertisers = await getCollection("advertisers")
---

<Stack class={cx("justify-evenly gap-6 max-w-2xl mx-auto", className)} {...props}>
  {
    advertisers.map(({ data: { name, description, websiteUrl, logo } }) => (
      <ExternalLink
        href={websiteUrl}
        title={description}
        eventName="click_ad"
        eventProps={{ url: websiteUrl, type: "Advertisers" }}
        class={cx(
          stackVariants({ size: "sm" }),
          "font-semibold opacity-85 hover:opacity-100 md:text-lg"
        )}
      >
        {logo && (
          <Image
            src={logo}
            alt={name}
            width={24}
            height={24}
            class="size-6"
            loading="lazy"
            fit="contain"
            layout="responsive"
          />
        )}
        {name}
      </ExternalLink>
    ))
  }
</Stack>
